/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/jscex-async@0.6.5/jscex-async.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(){"use strict";var e,t="670a1076-712b-4edd-9b70-64b152fe1cd9",n=function(e){return e._typeId==t},s=function(){};s.prototype={isTypeOf:n,_typeId:t,message:"The task has been cancelled."};var r=Function("return this")();void 0===r.__jscex__async__taskIdSeed&&(r.__jscex__async__taskIdSeed=0);var i=function(){};i.prototype={register:function(e){this.isCancellationRequested&&e(),this._handlers||(this._handlers=[]),this._handlers.push(e)},unregister:function(e){if(this._handlers){var t=this._handlers.indexOf(e);t>=0&&this._handlers.splice(t,1)}},cancel:function(){if(!this.isCancellationRequested){this.isCancellationRequested=!0;var t=this._handlers;delete this._handlers;for(var n=0;n<t.length;n++)try{t[n]()}catch(t){e.logger.warn("[WARNING] Cancellation handler threw an error: "+t)}}},throwIfCancellationRequested:function(){if(this.isCancellationRequested)throw new s}};var o=function(e){this.id=++__jscex__async__taskIdSeed,this._delegate=e,this._listeners={},this.status="ready"};o.prototype={start:function(){if("ready"!=this.status)throw new Error('Task can only be started in "ready" status.');return this.status="running",this._delegate(this),this},complete:function(t,s){if("running"!=this.status)throw new Error('The "complete" method can only be called in "running" status.');var r=this._listeners;if(delete this._listeners,"success"==t)this.result=s,this.status="succeeded",this._notify("success",r.success);else{if("failure"!=t)throw new Error("Unsupported type: "+t);this.error=s,n(s)?this.status="canceled":this.status="faulted",this._notify("failure",r.failure)}this._notify("complete",r.complete),!this.error||r.failure||r.complete||e.logger.warn("[WARNING] An unhandled error occurred: "+this.error)},_notify:function(e,t){if(t)for(var n=0;n<t.length;n++)t[n].call(this)},addEventListener:function(e,t){return this._listeners?(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t),this):this},removeEventListener:function(e,t){if(!this._listeners)return this;var n=this._listeners[e];if(!n)return this;var s=n.indexOf(t);return s>=0&&n.splice(s,1),this}},o.create=function(e){return new o(e)},o.isTask=function(e){return"function"==typeof e.start&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener&&"function"==typeof e.complete};var a=function(){};a.prototype={Start:function(e,t){return o.create((function(n){t.next(e,(function(e,t,s){if("normal"==e||"return"==e)n.complete("success",t);else{if("throw"!=e)throw new Error("Unsupported type: "+e);n.complete("failure",t)}}))}))},Bind:function(e,t){return{next:function(n,s){var r=function(e){if(this.error)s("throw",this.error);else{var r;try{r=t.call(n,this.result)}catch(e){return void s("throw",e)}r.next(n,s)}};"ready"==e.status?(e.addEventListener("complete",r),e.start()):"running"==e.status?e.addEventListener("complete",r):r()}}}};var c=!("function"!=typeof require||"undefined"==typeof module||!module.exports),u=!("function"!=typeof require||"function"!=typeof define||!define.amd),l=function(){e.define({name:"async",version:"0.6.5",exports:c&&module.exports,require:c&&require,autoloads:["builderbase"],dependencies:{builderbase:"~0.6.5"},init:function(){e._.each(e.BuilderBase.prototype,(function(e,t){a.prototype[e]=t})),e.Async||(e.Async={});var t=e.Async;t.CancellationToken=i,t.CanceledError=s,t.Task=o,t.AsyncBuilder=a,e.binders.async="$await",e.builders.async=new a}})};if(c){try{e=require("./jscex")}catch(t){e=require("jscex")}l()}else if(u)require("jscex",(function(t){e=t,l()}));else{if(!r.Jscex)throw new Error('Missing the root object, please load "jscex" component first.');e=r.Jscex,l()}}();
//# sourceMappingURL=/sm/553073e0ffd7bf4fb8536387533d6a40a294d190f0abef2a5d1e765392837603.map